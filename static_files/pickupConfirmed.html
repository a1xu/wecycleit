<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/bootstrap-grid.min.css">
        <link rel="stylesheet" href="css/bootstrap-reboot.min.css">
        <link rel="stylesheet" href="css/index.css">
        <script src="js/jquery-3.4.0.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/bootstrap.bundle.min.js"></script>
        <script src="js/moment.min.js"></script>
        <title>WeCycleIt - Pickup Confirmed</title>
    </head>
    <body>
        <div id="navtop">
            <nav class="navbar navbar-dark" style="background-color: #28a745;">
                <a class="navbar-brand" href="/">WeCycleIt</a>
            </nav>
        </div>

        <div class="backButton">
            <button class="btn btn-outline-success" onclick="goBack()">Go Back</button>
        </div>

        <div class="container">
            <h3>Pickup Confirmed</h3>
            <br>
            <p>Thank you, <span id="insertName"></span>!</p>
            <p>Your curbside pickup has been scheduled for:</p>
            <p class="info" id="insertDate"></p>
            <p>at the following location:</p>
            <p class="info"><span id="insertAddress1"></span>, <span id="insertAddress2"></span></p>
            <p class="info"><span id="insertCity"></span>, <span id="insertState"></span> <span id="insertZip"></p>

            <br>
            <button class="btn btn-success" onclick="window.location.href='/index.html'">Return to Homepage</button>
        </div>

        <script>
            function goBack() {
              window.history.back();
            }

            $.ajax({
                    url: 'schedules',
                    type: 'GET',
                    dataType : 'json',
                    success: (data) => {
                        console.log('You received some data!', data);
                        // console.log(data[0].name);
                        var date = data[0].date + "T" + data[0].time + ":00";
                        var dateFormatted = moment(date).format("dddd, MMMM D, h:mm A");

                        // console.log(date);
                        // console.log(dateFormatted);

                        $('#insertName').html(data[0].name);
                        $('#insertDate').html(dateFormatted);
                        $('#insertAddress1').html(data[0].address);
                        $('#insertAddress2').html(data[0].other);
                        $('#insertCity').html(data[0].city);
                        $('#insertState').html(data[0].state);
                        $('#insertZip').html(data[0].zip);
                    },
            });

        </script>

    </body>
</html>
